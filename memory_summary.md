# Project Memory Summary

This file contains a summary of the project structure and key components as understood by the AI assistant at a specific point in time.

## Project Summary
This project is a web-based Integrated Development Environment (IDE) called AIDE. It is built using React and TypeScript. Key features include a code editor, a live preview panel with an embedded browser, a git interface, and an AI assistant. The project structure includes components for UI elements, hooks for managing application state and logic (e.g., AI chat, git operations, file system), a bundler (esbuild) for compiling code, and various utility services. There are also configurations for a build pipeline, Docker, and native mobile development (via Capacitor), suggesting it can be built for multiple platforms.

## Folder Summaries

### `app/`
The `app/` folder contains the core application logic. `ViewRenderer.tsx` acts as a router, rendering the appropriate view component (CodeView, PreviewView, AiView, GitView, SettingsView, PromptsView) based on the current application state. `config.ts` defines the default settings and configuration for the application, such as API keys, AI models, and Git settings. `useAppLogic.ts` is the main orchestration hook that combines various smaller hooks (e.g., useFiles, useThreads, useSettings, useAiChat) to manage the application's overall state and logic, including file management, project handling, AI interactions, and Git integration.

### `bundler/`
The `bundler/` folder manages the code bundling process. It contains an abstraction layer in `index.ts` that can switch between different bundler types, currently defaulting to `esbuild`. The `esbuild/` subfolder contains the implementation for esbuild-wasm, including `index.ts` for the main bundling logic, `service.ts` for initializing the web assembly, and `plugins/` for custom esbuild plugins. `unpkgPathPlugin.ts` handles module resolution, including resolving bare imports from a CDN (esm.sh) and relative paths, potentially using an import map from `index.html`. `fetchPlugin.ts` handles fetching file content, either from the local virtual file system or from a CDN, and also manages CSS imports. The `vite/` subfolder contains a placeholder for a future Vite-based bundler implementation. The `types.ts` file defines the `BundleResult` and `OnLog` interfaces.

### `components/`
The `components/` folder houses all the reusable UI components of the AIDE application. `BottomNav.tsx` provides the main navigation bar at the bottom, allowing users to switch between different views (Code, Preview, AI, Git, Settings). `ErrorBoundary.tsx` and `ErrorFallback.tsx` implement a React error boundary to catch and display errors gracefully, with an option to reset application data. `Header.tsx` is the top navigation bar, displaying the application title, project name, live video status, and AI mute controls. Subfolders organize components by feature: `ai/` for AI chat UI, `browser/` for the browser view, `icons/` for SVG icon components, `modals/` for various modal dialogues (settings, history, git), `preview/` for the preview pane UI, and `views/` for the main page layouts of each section.

### `electron/`
The `electron/` folder contains the necessary code to run the AIDE web application as a standalone desktop application using Electron. `main.js` is the main process entry point; it creates the Electron window, loads the `index.html` file of the web app, and sets up an IPC (Inter-Process Communication) handler. `preload.js` acts as a secure bridge between the web app (renderer process) and the main process, exposing a `gitHttpRequest` function. This function is used by the web app's git service to perform network requests in the main process, which is not restricted by CORS (Cross-Origin Resource Sharing), thus enabling Git operations with services like GitHub. The `README.md` file provides a detailed explanation of this architecture.

### `hooks/`
The `hooks/` folder contains a collection of custom React hooks for managing the application's state and logic. `useAppLogic.ts` is the main orchestration hook that combines many of these smaller hooks. The `useAiChat/` subfolder provides the core logic for AI text-based conversations, handling sending messages, processing streaming responses, and managing tool execution via `chatSessionManager.ts`, `streamProcessor.ts`, `toolExecutor.ts`, and `turnManager.ts`. `useAiLive/` is for the real-time AI assistant, managing audio recording/playback and handling live interactions. Other hooks like `useBrowser.ts`, `useDebug.ts`, `useFiles.ts`, `useGitLogic.ts`, `usePreviewBundler.ts`, `useProjects.ts`, `useSettings.ts`, `useThreads.ts`, `useUIState.ts`, `useVFS.ts`, and `useWakeWord.ts` manage specific aspects of the IDE's functionality, such as the file system, project state, git operations, UI state, and AI wake word detection. The `types.ts` file in `useAiChat/` defines the interfaces for the AI chat turn state.

### `prompts/`
The `prompts/` folder contains the instructional protocols for the AI assistant. `defaultPrompts.ts` defines an array of all available protocols, acting as a library. This library is used to seed the application's database with the AI's core instructions and personas. Each protocol file (e.g., `lead_engineer_protocol.ts`, `debugging_protocol.ts`, `git_commit_protocol.ts`) provides a specific set of guidelines and a workflow for the AI to follow when performing a particular type of task, ensuring its actions are structured and aligned with best practices.

### `services/`
The `services/` folder contains service-level logic and workers. `gitService.ts` provides an interface for all Git operations, with implementations for both the main thread (used in Electron and iframes) and a web worker (`git.worker.ts`). The worker is used for performance in standard web environments to prevent UI freezing. The worker handles cloning, committing, pushing, pulling, rebasing, and file status checks using `isomorphic-git` and `LightningFS` for the virtual file system. `toolOrchestrator.ts` aggregates all the AI tool declarations and provides a `systemInstruction` that dictates the AI's core cognitive cycle and workflow. It also includes a factory function `createToolImplementations` to instantiate all tool methods with their necessary dependencies. `aiTools.ts`, `nativeFetch.ts`, and `nativeHttp.ts` are placeholders for future AI tool orchestrations and native network implementations.
